#pragma once

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////// INCLUDES /////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

#include "AppFixture.hxx"

extern "C"
{
    #include "App.h"
    #include "Settings.h"
}

///////////////////////////////////////////////////////////////////////////////
/////////////////////////// MACROS/DEFINITIONS ////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

SHARE_APP
SHARE_SETTINGS

///////////////////////////////////////////////////////////////////////////////
/////////////////////////// CLASSES/STRUCTURES ////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

class DetectObstaclesDuringOpeningFixture : public AppFixture
{
    protected:
        void SetUp    () override { }
        void TearDown () override
        {
            gSettings.App.Motor.Position.Set         = ONE;
            gSettings.App.Motor.Position.Current     = ZERO;
            gSettings.App.Motor.IsObstacleDetected   = false;

            gApp.DetectObstaclesDuring.DelayInMs     = ONE;
            gApp.DetectObstaclesDuring.ObstaclesNum  = ZERO;
        }
};

///////////////////////////////////////////////////////////////////////////////
/////////////////////////////// END OF FILE ///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////